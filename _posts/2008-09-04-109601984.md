---
title: "OpenGL上的烟花[2]"
category: life
---

<p>只能让贴下数据结构了</p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">//////////////////////////////////////////////////////////////////////////</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">#define</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: black">MAX_PARTICLES</span><span style="mso-tab-count: 1">  </span>24<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">小烟花个数<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">#define</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: black">MAX_TAIL</span><span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>30<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">烟花尾部长度<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">#define</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: black">MAX_FIRE</span><span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>5<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">烟花总个数<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">#define</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: black">PI</span><span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>3.1415926</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">#define</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: black">COLOR_NUM</span><span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>12</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">static</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: black">GLfloat</span> <span style="color: black">colors</span>[<span style="color: black">COLOR_NUM</span>][3]=<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">彩虹颜色<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">{</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span>{1.0f,0.5f,0.5f},{1.0f,0.75f,0.5f},{1.0f,1.0f,0.5f},{0.75f,1.0f,0.5f},</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span>{0.5f,1.0f,0.5f},{0.5f,1.0f,0.75f},{0.5f,1.0f,1.0f},{0.5f,0.75f,1.0f},</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span>{0.5f,0.5f,1.0f},{0.75f,0.5f,1.0f},{1.0f,0.5f,1.0f},{1.0f,0.5f,0.75f}</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">};</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> </span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: black;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">GLfloat</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">  </span><span style="color: black">zoom</span> = -40.0f;<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">视角远近<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> </span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">typedef</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: blue">struct</span><span style="mso-spacerun: yes">  </span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">{</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: blue">float</span> <span style="color: black">x</span>, <span style="color: black">y</span>, <span style="color: black">z</span>;<span style="mso-tab-count: 5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">粒子位置<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">} <span style="color: black">PARTICLE</span>;</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> </span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">typedef</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> <span style="color: blue">struct</span><span style="mso-spacerun: yes">  </span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">{</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: black">PARTICLE</span> <span style="color: black">particles</span>[<span style="color: black">MAX_TAIL</span>];</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: blue">float</span> <span style="color: black">xspeed</span>, <span style="color: black">yspeed</span>, <span style="color: black">zspeed</span>;<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">粒子速度<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: blue">float</span> <span style="color: black">xg</span>, <span style="color: black">yg</span>, <span style="color: black">zg</span>;<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">加速度<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">} <span style="color: black">TAIL</span>;</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"> </span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt; color: blue;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">struct</span><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-spacerun: yes">  </span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">{</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: black">TAIL</span> <span style="color: black">tails</span>[<span style="color: black">MAX_PARTICLES</span>];</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: blue">float</span> <span style="color: black">r</span>, <span style="color: black">g</span>, <span style="color: black">b</span>;<span style="mso-tab-count: 5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">颜色<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: black">GLfloat</span><span style="mso-tab-count: 1">  </span><span style="color: black">life</span>;<span style="mso-tab-count: 5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">生命<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: black">GLfloat</span> <span style="color: black">fade</span>;<span style="mso-tab-count: 5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">衰减速度<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: black">GLfloat</span> <span style="color: black">rad</span>;<span style="mso-tab-count: 5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// xz</span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">平面上的运动速度<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: blue">int</span> <span style="color: black">style</span>;<span style="mso-tab-count: 6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">上升还是下降<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: blue">int</span> <span style="color: black">count</span>;<span style="mso-tab-count: 6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: green">// </span></span><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">小烟花尾部点数<span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left; mso-layout-grid-align: none" align="left"><span style="font-size: 9pt;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">} <span style="color: black">Fire</span>[<span style="color: black">MAX_FIRE</span>];<br>
</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 9pt; color: green;  mso-hansi- mso-bidi- mso-font-kerning: 0pt; mso-no-proof: yes">//////////////////////////////////////////////////////////////////////////</span></p>